# Uibar - Сервис посуточной аренды жилья

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT) Надежная аренда жилья посуточно с честными отзывами. Проект Uibar предоставляет платформу для поиска, бронирования и сдачи в аренду жилья на короткий срок.

## Ключевые особенности

### Реализовано (Бэкенд):

* **Основа:** Разработан бэкенд на Python с использованием фреймворка Django.
* **База данных:** Используется PostgreSQL 15 для хранения данных с применением миграций Django.
* **Контейнеризация:** Приложение полностью контейнеризировано с помощью Docker и Docker Compose.
* **Настройка окружения:** Легкая настройка через переменные окружения (файл `.env`).
* **API:** Разработаны эндпоинты на Django REST Framework для основного функционала.
* **Аутентификация:** Реализована система на основе **JWT (Simple JWT)** с **кастомной моделью пользователя**. Доступны API для **регистрации**, получения/обновления **профиля текущего пользователя** и стандартные эндпоинты для получения/обновления токенов.
* **Каталог Жилья:** Реализован API для получения списка квартир с возможностью **фильтрации** (по городу, типу, гостям, кроватям) и **сортировки** (по цене, дате). Оптимизированы запросы к БД.
* **Управление объектами:** Реализован API для CRUD операций с квартирами (с проверкой прав владельца), включая **загрузку и удаление фотографий**.
* **Генерация описания:** Интегрирована функция **автоматической генерации описания** квартиры с помощью ИИ (Gemini).
* **Удобства (Amenities):** Возможность просмотра списка доступных удобств через API.
* **Отзывы и Рейтинги:** Реализован API для добавления и просмотра отзывов с оценками (с проверкой прав автора).
* **Бронирование:** Реализован API для создания и просмотра **пользователем своих** бронирований.
* **Персистентность:** Данные PostgreSQL и загруженные медиафайлы сохраняются между перезапусками контейнеров.

### Планируется:

* **Фронтенд:** Разработка интерактивного пользовательского интерфейса с нуля (возможно, с использованием современного frontend-фреймворка, например, React или Vue) для взаимодействия с существующим API бэкенда.
* **Развертывание (Deployment):** Подготовка и выполнение деплоя приложения на облачную платформу **Render.com**.

## Технологии

* **Бэкенд:** Python 3.10+, Django 4+
* **База Данных:** PostgreSQL 15
* **Веб-сервер (в контейнере):** Gunicorn (или аналогичный ASGI/WSGI сервер)
* **Контейнеризация:** Docker, Docker Compose
* **Фронтенд (Планируется):** HTML5, CSS3, JavaScript (вероятно, с использованием фреймворка React/Vue/Svelte)

## Установка и Запуск (Бэкенд)

### Требования:

* [Docker](https://www.docker.com/get-started)
* [Docker Compose](https://docs.docker.com/compose/install/) (обычно устанавливается вместе с Docker Desktop)
* [Git](https://git-scm.com/downloads) (для клонирования репозитория)

### Инструкция:

1.  **Клонировать репозиторий:**
    ```bash
    git clone [https://github.com/gulnarkaz/uibar.git](https://github.com/gulnarkaz/uibar.git)
    cd uibar
    ```
    *(Примечание: Замените `uibar` в команде `cd uibar` на реальное имя папки, если оно другое)*

2.  **Настроить переменные окружения:**
    * Создайте файл `.env` в корневой папке проекта.
    * Скопируйте содержимое из файла `.env.example` (рекомендуется создать такой файл) в `.env`.
    * Заполните необходимые значения в `.env`:
        ```dotenv
        # Настройки Базы Данных (для docker-compose.yml)
        DB_NAME=uibar_db
        DB_USER=uibar_user
        DB_PASSWORD=your_strong_postgres_password # Замените на надежный пароль

        # Настройки Django (для settings.py, читаются внутри контейнера web)
        SECRET_KEY=your_django_secret_key # Замените на ваш секретный ключ Django
        DEBUG=True # Или False для продакшена
        ALLOWED_HOSTS=localhost,127.0.0.1 # Добавьте другие хосты при необходимости

        # Другие переменные...
        POSTGRES_HOST=db
        POSTGRES_PORT=5432
        DATABASE_URL=postgresql://${DB_USER}:${DB_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${DB_NAME}
        ```
    * **Важно:** Убедитесь, что ваш Django `settings.py` настроен на чтение этих переменных окружения.

3.  **Собрать и запустить контейнеры:**
    * Из корневой папки проекта выполните:
        ```bash
        docker-compose build
        docker-compose up -d
        ```

4.  **Применить миграции базы данных (если запускаете впервые или были изменения):**
    ```bash
    docker-compose exec web python manage.py migrate
    ```

5.  **Создать суперпользователя Django (опционально):**
    ```bash
    docker-compose exec web python manage.py createsuperuser
    ```

6.  **Доступ к приложению:**
    * Бэкенд (API) будет доступен по адресу: `http://localhost:8000`
    * Админка Django: `http://localhost:8000/admin/` (если настроено)
    * *Примечание: Фронтенд на данный момент отсутствует и требует разработки.*

7.  **Подключение к Базе Данных (например, через DBeaver):**
    * База данных PostgreSQL доступна для подключения с вашего хост-компьютера.
    * **Хост:** `localhost`
    * **Порт:** `5433` (это порт, который проброшен на хост в `docker-compose.yml`)
    * **Имя базы данных:** Значение `DB_NAME` из вашего `.env` файла.
    * **Пользователь:** Значение `DB_USER` из вашего `.env` файла.
    * **Пароль:** Значение `DB_PASSWORD` из вашего `.env` файла.
    * Используйте эти данные для настройки соединения в DBeaver или другом SQL-клиенте.

8.  **Тестирование API (например, через Postman):**
    * API эндпоинты вашего Django-приложения доступны по базовому адресу `http://localhost:8000/` (конкретные пути будут зависеть от ваших `urls.py`, например, `http://localhost:8000/api/v1/...`).
    * Используйте Postman, Insomnia или `curl` для отправки запросов (GET, POST, PUT, DELETE и т.д.) к вашим API и проверки ответов.
    * *(Рекомендация: Создайте и поддерживайте Postman-коллекцию с описанием ваших API-запросов и поделитесь ей с командой или добавьте в репозиторий).*

## Структура Проекта (Упрощенно)

.
├── backend/ (или uibar_project_new/) # Папка с кодом Django
│   ├── manage.py
│   ├── apps/ # Приложения Django (auth_app, apartments, etc.)
│   └── project_name/ # Настройки проекта Django (settings.py, urls.py)
├── media/ # Папка для загруженных медиафайлов (синхронизируется с томом)
├── .env # Файл с переменными окружения (НЕ КОММИТИТЬ В GIT!)
├── .env.example # Пример файла .env (КОММИТИТЬ В GIT)
├── .gitignore # Файл для исключения ненужных файлов из Git
├── docker-compose.yml # Определение сервисов Docker
├── Dockerfile # Инструкции по сборке образа для Django приложения
└── README.md # Этот файл


## Дальнейшие планы

Основной фокус дальнейшей разработки — создание фронтенд-интерфейса для взаимодействия с существующим API бэкенда.
